{% extends 'student/base_student.html' %}
{% load static %}

{% block title %}Game Zone - MANAS{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/game-zone-unified.css' %}">
{% endblock %}

{% block header_title %}Wellness Game Zone{% endblock %}

{% block content %}
<div class="content-body fade-in">
    <!-- Welcome Banner -->
    <div class="quote-card">
        <h3>üéÆ Play Your Way to Better Mental Health</h3>
        <p>Fun, engaging games designed to boost your mood and reduce stress</p>
    </div>

    <!-- Game Categories -->
    <div class="games-grid">
        <div class="game-card" onclick="playGame('breathing')">
            <div class="game-icon breathe">
                <i class="fas fa-wind"></i>
            </div>
            <h3>Breathing Bubble</h3>
            <p>Relaxing breathing exercise with visual bubbles</p>
            <div class="topic-meta">üéØ Focus & Calm ‚Ä¢ 2-5 min</div>
        </div>

        <div class="game-card" onclick="playGame('mood-colors')">
            <div class="game-icon journal">
                <i class="fas fa-palette"></i>
            </div>
            <h3>Mood Colors</h3>
            <p>Express your feelings through colors and art</p>
            <div class="topic-meta">üé® Creativity ‚Ä¢ 5-10 min</div>
        </div>

        <div class="game-card" onclick="playGame('memory-match')">
            <div class="game-icon">
                <i class="fas fa-brain"></i>
            </div>
            <h3>Memory Match</h3>
            <p>Positive affirmations memory matching game</p>
            <div class="topic-meta">üß† Memory ‚Ä¢ 3-7 min</div>
        </div>

        <div class="game-card" onclick="playGame('gratitude-garden')">
            <div class="game-icon relax">
                <i class="fas fa-seedling"></i>
            </div>
            <h3>Gratitude Garden</h3>
            <p>Grow a virtual garden by practicing gratitude</p>
            <div class="topic-meta">üå± Positivity ‚Ä¢ 5-15 min</div>
        </div>

        <div class="game-card" onclick="playGame('stress-buster')">
            <div class="game-icon anxiety">
                <i class="fas fa-gamepad"></i>
            </div>
            <h3>Stress Buster</h3>
            <p>Quick mini-games to release tension</p>
            <div class="topic-meta">‚ö° Energy Release ‚Ä¢ 2-5 min</div>
        </div>

        <div class="game-card" onclick="playGame('mindful-maze')">
            <div class="game-icon wellbeing">
                <i class="fas fa-route"></i>
            </div>
            <h3>Mindful Maze</h3>
            <p>Navigate through peaceful landscapes mindfully</p>
            <div class="topic-meta">üßò Mindfulness ‚Ä¢ 10-20 min</div>
        </div>
    </div>

    <!-- Daily Challenge -->
    <div style="margin-top: 2rem;">
        <div class="support-card" onclick="dailyChallenge()">
            <div class="support-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h3>üèÜ Daily Wellness Challenge</h3>
            <p>Complete today's challenge and earn wellness points!</p>
            <div class="availability-badge">50 points available</div>
            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="dailyChallenge()">
                Start Today's Challenge
            </button>
        </div>
    </div>

    <!-- Your Progress -->
    <div style="margin-top: 2rem;">
        <h3 style="margin-bottom: 1.5rem; color: #2d3748; text-align: center;">üèÜ Your Wellness Gaming Progress</h3>
        <div class="activities-grid">
            <div class="activity-card">
                <div class="activity-icon breathe">
                    <i class="fas fa-star"></i>
                </div>
                <div class="activity-title">Wellness Points</div>
                <div class="activity-description">1,250 points earned this month</div>
            </div>
            
            <div class="activity-card">
                <div class="activity-icon journal">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="activity-title">Daily Streak</div>
                <div class="activity-description">7 consecutive days of wellness activities</div>
            </div>
            
            <div class="activity-card">
                <div class="activity-icon relax">
                    <i class="fas fa-medal"></i>
                </div>
                <div class="activity-title">Achievements</div>
                <div class="activity-description">5 wellness badges unlocked</div>
            </div>
        </div>
    </div>
</div>

<!-- Game Modal -->
<div id="gameModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeGameModal()">&times;</span>
        <div id="gameContent">
            <!-- Game content will be loaded here -->
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function playGame(gameType) {
        const modal = document.getElementById('gameModal');
        const content = document.getElementById('gameContent');
        
        const games = {
            'breathing': {
                title: 'ü´ß Breathing Bubble Game',
                content: `
                    <h3>Breathing Bubble</h3>
                    <div style="text-align: center; padding: 2rem;">
                        <div style="width: 150px; height: 150px; background: linear-gradient(135deg, #a8e6cf, #7fcdcd); 
                                    border-radius: 50%; margin: 0 auto 2rem; display: flex; align-items: center; 
                                    justify-content: center; font-size: 1.2rem; color: white; animation: breathe 4s infinite;">
                            Breathe In
                        </div>
                        <p>Watch the bubble and breathe along with it</p>
                        <button class="btn btn-primary" onclick="startBreathing()">Start Breathing Exercise</button>
                    </div>
                    <style>
                        @keyframes breathe {
                            0%, 100% { transform: scale(1); }
                            50% { transform: scale(1.2); }
                        }
                    </style>
                `
            },
            'mood-colors': {
                title: 'üé® Mood Colors',
                content: `
                    <h3>Express Your Mood with Colors</h3>
                    <div style="text-align: center; padding: 2rem;">
                        <p>How are you feeling right now? Choose colors that represent your mood:</p>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 2rem 0;">
                            <div style="width: 50px; height: 50px; background: #ff6b6b; border-radius: 50%; cursor: pointer;" onclick="selectColor('#ff6b6b')"></div>
                            <div style="width: 50px; height: 50px; background: #4ecdc4; border-radius: 50%; cursor: pointer;" onclick="selectColor('#4ecdc4')"></div>
                            <div style="width: 50px; height: 50px; background: #45b7d1; border-radius: 50%; cursor: pointer;" onclick="selectColor('#45b7d1')"></div>
                            <div style="width: 50px; height: 50px; background: #96ceb4; border-radius: 50%; cursor: pointer;" onclick="selectColor('#96ceb4')"></div>
                            <div style="width: 50px; height: 50px; background: #ffeaa7; border-radius: 50%; cursor: pointer;" onclick="selectColor('#ffeaa7')"></div>
                            <div style="width: 50px; height: 50px; background: #dda0dd; border-radius: 50%; cursor: pointer;" onclick="selectColor('#dda0dd')"></div>
                            <div style="width: 50px; height: 50px; background: #ff7675; border-radius: 50%; cursor: pointer;" onclick="selectColor('#ff7675')"></div>
                            <div style="width: 50px; height: 50px; background: #74b9ff; border-radius: 50%; cursor: pointer;" onclick="selectColor('#74b9ff')"></div>
                        </div>
                        <button class="btn btn-primary" onclick="saveMoodColors()">Save My Mood Palette</button>
                    </div>
                `
            },
            'memory-match': {
                title: 'üß† Memory Match',
                content: `
                    <h3>Positive Affirmations Memory Game</h3>
                    <div style="text-align: center; padding: 2rem;">
                        <p>Match the positive affirmations!</p>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin: 2rem 0; max-width: 400px; margin-left: auto; margin-right: auto;">
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                            <div class="memory-card" onclick="flipCard(this)">?</div>
                        </div>
                        <button class="btn btn-primary" onclick="newGame()">New Game</button>
                    </div>
                    <style>
                        .memory-card {
                            width: 60px; height: 60px; background: #f0f0f0; border-radius: 8px;
                            display: flex; align-items: center; justify-content: center;
                            cursor: pointer; transition: all 0.3s ease; font-weight: bold;
                        }
                        .memory-card:hover { background: #e0e0e0; }
                    </style>
                `
            }
        };
        
        const game = games[gameType];
        if (game) {
            content.innerHTML = game.content;
            modal.style.display = 'block';
        }
    }

    function closeGameModal() {
        document.getElementById('gameModal').style.display = 'none';
    }

    function dailyChallenge() {
        showNotification('üèÜ Daily challenge: Take 3 deep breaths right now!', 'info');
        setTimeout(() => {
            showNotification('‚úÖ Challenge completed! +50 wellness points earned!', 'success');
        }, 5000);
    }

    function startBreathing() {
        showNotification('ü´ß Breathing exercise started. Follow the bubble!', 'success');
    }

    function selectColor(color) {
        showNotification(`üé® Selected color: ${color}`, 'info');
    }

    function saveMoodColors() {
        showNotification('üé® Mood palette saved! Great job expressing yourself!', 'success');
        closeGameModal();
    }

    function flipCard(card) {
        const affirmations = ['üí™', 'üåü', '‚ù§Ô∏è', 'üåà'];
        const randomAffirmation = affirmations[Math.floor(Math.random() * affirmations.length)];
        card.textContent = randomAffirmation;
        card.style.background = '#7BA098';
        card.style.color = 'white';
    }

    function newGame() {
        const cards = document.querySelectorAll('.memory-card');
        cards.forEach(card => {
            card.textContent = '?';
            card.style.background = '#f0f0f0';
            card.style.color = '#333';
        });
    }

    function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `<span>${message}</span>`;
        document.body.appendChild(notification);
        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => document.body.removeChild(notification), 300);
        }, 3000);
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
        const modal = document.getElementById('gameModal');
        if (event.target === modal) {
            closeGameModal();
        }
    }
</script>
{% endblock %}