{% extends 'counselor/base_counselor_admin.html' %}

{% block title %}Counselor Dashboard - MANAS{% endblock %}

{% block content %}
<!-- Crisis Alert Banner -->
<div style="background: linear-gradient(135deg, rgba(240, 146, 146, 0.1) 0%, rgba(252, 198, 129, 0.1) 100%); border: 1px solid rgba(240, 146, 146, 0.2); border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h3 style="font-size: 1.125rem; font-weight: 700; color: #dc2626; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                🚨 Critical Alerts Pending
            </h3>
            <p style="color: #7f1d1d; font-size: 0.875rem;">{{ crisis_alerts|default:"2" }} students require immediate crisis intervention attention</p>
        </div>
        <button style="background: linear-gradient(135deg, #f09292 0%, #fcc681 100%); color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-weight: 600; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 0.5rem;" 
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(240, 146, 146, 0.3)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            Respond Now
        </button>
    </div>
</div>

<!-- Statistics Overview -->
<div class="counselor-stats-grid">
    <div class="counselor-stat-card">
        <div class="counselor-stat-icon counselor-stat-icon-students">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
            </svg>
        </div>
        <div class="counselor-stat-number">{{ active_students|default:"28" }}</div>
        <div class="counselor-stat-label">Active Students</div>
        <div class="counselor-stat-trend counselor-trend-up">Currently engaged</div>
    </div>

    <div class="counselor-stat-card">
        <div class="counselor-stat-icon counselor-stat-icon-sessions">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
            </svg>
        </div>
        <div class="counselor-stat-number">{{ sessions_today|default:"12" }}</div>
        <div class="counselor-stat-label">Sessions Today</div>
        <div class="counselor-stat-trend counselor-trend-up">+3 from yesterday</div>
    </div>

    <div class="counselor-stat-card">
        <div class="counselor-stat-icon counselor-stat-icon-crisis">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
        </div>
        <div class="counselor-stat-number">{{ crisis_count|default:"3" }}</div>
        <div class="counselor-stat-label">Crisis Alerts</div>
        <div class="counselor-stat-trend counselor-trend-urgent">Needs attention</div>
    </div>

    <div class="counselor-stat-card">
        <div class="counselor-stat-icon counselor-stat-icon-rating">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
        </div>
        <div class="counselor-stat-number">{{ satisfaction_rate|default:"4.8" }}</div>
        <div class="counselor-stat-label">Satisfaction Rate</div>
        <div class="counselor-stat-trend counselor-trend-up">Excellent feedback</div>
    </div>
</div>

<!-- Main Dashboard Content -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
    <!-- Session Analytics -->
    <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; border: 1px solid #e2e8f0; transition: all 0.3s ease;"
         onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(120, 123, 218, 0.15)'"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h3 style="font-size: 1.125rem; font-weight: 700; color: #1e293b;">📊 Session Analytics</h3>
            <a href="{% url 'counselor_sessions' %}" style="color: #787bda; font-size: 0.875rem; font-weight: 600; text-decoration: none;">View Details →</a>
        </div>
        
        <div style="margin-bottom: 1rem;">
            <h4 style="font-size: 1rem; font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">Weekly Activity</h4>
            <p style="font-size: 0.875rem; color: #64748b; margin: 0;">Sessions completed over the past 7 days</p>
        </div>
        
        <div style="display: flex; align-items: end; gap: 0.5rem; height: 120px; margin-bottom: 1rem;">
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #787bda 0%, #8ee0fe 100%); border-radius: 0.25rem; height: 60%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Mon</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #8ee0fe 0%, #ffe9b4 100%); border-radius: 0.25rem; height: 80%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Tue</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #ffe9b4 0%, #fcc681 100%); border-radius: 0.25rem; height: 45%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Wed</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #fcc681 0%, #f09292 100%); border-radius: 0.25rem; height: 90%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Thu</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #787bda 0%, #8ee0fe 100%); border-radius: 0.25rem; height: 75%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Fri</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #8ee0fe 0%, #ffe9b4 100%); border-radius: 0.25rem; height: 35%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Sat</span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <div style="width: 100%; background: linear-gradient(135deg, #ffe9b4 0%, #fcc681 100%); border-radius: 0.25rem; height: 50%; margin-bottom: 0.5rem;"></div>
                <span style="font-size: 0.75rem; color: #64748b;">Sun</span>
            </div>
        </div>
    </div>

    <!-- Student Health Overview -->
    <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; border: 1px solid #e2e8f0; transition: all 0.3s ease;"
         onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(120, 123, 218, 0.15)'"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h3 style="font-size: 1.125rem; font-weight: 700; color: #1e293b;">🏥 Health Overview</h3>
            <span style="background: rgba(16, 185, 129, 0.1); color: #059669; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">All Monitored</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div style="background: linear-gradient(135deg, rgba(120, 123, 218, 0.1) 0%, rgba(142, 224, 254, 0.1) 100%); border-radius: 0.5rem; padding: 1rem;">
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: #1e293b;">Active Cases</h4>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #787bda;"></div>
                    <span style="font-size: 0.875rem; color: #64748b;">28 students • 12 urgent</span>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%); border-radius: 0.5rem; padding: 1rem;">
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: #1e293b;">Recovery Rate</h4>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #10b981;"></div>
                    <span style="font-size: 0.875rem; color: #64748b;">87% improved • +5%</span>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, rgba(252, 198, 129, 0.1) 0%, rgba(255, 233, 180, 0.1) 100%); border-radius: 0.5rem; padding: 1rem;">
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: #1e293b;">Response Time</h4>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #fcc681;"></div>
                    <span style="font-size: 0.875rem; color: #64748b;">4.2 hours avg</span>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, rgba(142, 224, 254, 0.1) 0%, rgba(255, 233, 180, 0.1) 100%); border-radius: 0.5rem; padding: 1rem;">
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: #1e293b;">Session Load</h4>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #8ee0fe;"></div>
                    <span style="font-size: 0.875rem; color: #64748b;">73% capacity</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div style="background: white; border-radius: 0.75rem; padding: 1.5rem; border: 1px solid #e2e8f0; transition: all 0.3s ease; margin-bottom: 2rem;"
     onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(120, 123, 218, 0.15)'"
     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h3 style="font-size: 1.125rem; font-weight: 700; color: #1e293b;">🕐 Recent Activity</h3>
        <a href="{% url 'counselor_sessions' %}" style="color: #787bda; font-size: 0.875rem; font-weight: 600; text-decoration: none;">View All →</a>
    </div>
    
    <div style="display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #f8fafc; border-radius: 0.5rem;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #787bda 0%, #8ee0fe 100%); display: flex; align-items: center; justify-content: center; font-weight: 700; color: white;">SJ</div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: #1e293b;">Session completed</div>
                <div style="font-size: 0.875rem; color: #64748b;">Sarah Johnson - Individual counseling</div>
            </div>
            <div style="background: rgba(16, 185, 129, 0.1); color: #059669; padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.75rem; font-weight: 600;">2 min ago</div>
        </div>

        <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #f8fafc; border-radius: 0.5rem;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #fcc681 0%, #f09292 100%); display: flex; align-items: center; justify-content: center; font-weight: 700; color: white;">⚠</div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: #1e293b;">Crisis alert triggered</div>
                <div style="font-size: 0.875rem; color: #64748b;">Student ID #4521 requires attention</div>
            </div>
            <div style="background: rgba(240, 146, 146, 0.1); color: #dc2626; padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.75rem; font-weight: 600;">15 min ago</div>
        </div>

        <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #f8fafc; border-radius: 0.5rem;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #8ee0fe 0%, #ffe9b4 100%); display: flex; align-items: center; justify-content: center; font-weight: 700; color: white;">📋</div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: #1e293b;">Assessment completed</div>
                <div style="font-size: 0.875rem; color: #64748b;">Mental health evaluation for Emma Davis</div>
            </div>
            <div style="background: rgba(142, 224, 254, 0.1); color: #0284c7; padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.75rem; font-weight: 600;">1 hour ago</div>
        </div>
    </div>
</div>

{% endblock %}